"""
Comprehensive batch fixer for pokemon_extra_data.py - handles correct Python dict format
"""
import re

# Official sizes for Gen 1-3 Pokemon (4-395)
FIXES = {
    4: {"h": 0.5, "w": 6.3},
    5: {"h": 0.9, "w": 19.0},
    6: {"h": 1.7, "w": 90.5},
    7: {"h": 0.5, "w": 7.7},
    8: {"h": 1.0, "w": 22.5},
    9: {"h": 1.6, "w": 85.0},
    10: {"h": 0.3, "w": 3.0},
    11: {"h": 0.6, "w": 12.0},
    12: {"h": 1.1, "w": 29.5},
    13: {"h": 0.7, "w": 12.0},
    14: {"h": 1.1, "w": 25.0},
    15: {"h": 1.5, "w": 56.0},
    16: {"h": 0.3, "w": 1.8},
    17: {"h": 0.6, "w": 8.5},
    18: {"h": 1.2, "w": 30.0},
    19: {"h": 0.5, "w": 8.0},
    20: {"h": 0.7, "w": 12.0},
    21: {"h": 0.3, "w": 1.5},
    22: {"h": 1.1, "w": 19.5},
    23: {"h": 0.6, "w": 27.0},
    24: {"h": 1.1, "w": 199.0},
    25: {"h": 0.4, "w": 6.0},
    26: {"h": 0.8, "w": 30.0},
    27: {"h": 0.5, "w": 12.0},
    28: {"h": 1.0, "w": 29.5},
    29: {"h": 0.5, "w": 6.0},
    30: {"h": 0.9, "w": 20.0},
    31: {"h": 1.5, "w": 55.0},
    32: {"h": 0.6, "w": 6.5},
    33: {"h": 0.9, "w": 12.0},
    34: {"h": 1.6, "w": 40.0},
    35: {"h": 0.6, "w": 8.5},
    36: {"h": 1.3, "w": 40.0},
    37: {"h": 0.6, "w": 9.9},
    38: {"h": 1.1, "w": 19.9},
    39: {"h": 0.5, "w": 5.0},
    40: {"h": 1.0, "w": 12.5},
    41: {"h": 1.3, "w": 54.0},
    42: {"h": 1.5, "w": 40.5},
    43: {"h": 0.7, "w": 3.2},
    44: {"h": 1.2, "w": 8.6},
    45: {"h": 1.7, "w": 15.5},
    46: {"h": 0.3, "w": 2.9},
    47: {"h": 1.0, "w": 29.5},
    48: {"h": 0.3, "w": 1.0},
    49: {"h": 1.0, "w": 33.0},
    50: {"h": 0.3, "w": 4.0},
    51: {"h": 0.9, "w": 40.0},
    52: {"h": 0.4, "w": 4.2},
    53: {"h": 1.0, "w": 42.0},
    54: {"h": 0.7, "w": 19.6},
    55: {"h": 1.7, "w": 76.0},
    56: {"h": 0.6, "w": 19.0},
    57: {"h": 1.6, "w": 130.0},
    58: {"h": 0.6, "w": 18.5},
    59: {"h": 1.1, "w": 31.0},
    60: {"h": 0.5, "w": 12.0},
    61: {"h": 0.6, "w": 17.0},
    62: {"h": 1.5, "w": 54.0},
    63: {"h": 0.9, "w": 19.5},
    64: {"h": 1.3, "w": 50.0},
    65: {"h": 1.6, "w": 84.0},
    66: {"h": 0.7, "w": 25.0},
    67: {"h": 1.5, "w": 56.5},
    68: {"h": 1.6, "w": 130.0},
    69: {"h": 0.7, "w": 8.0},
    70: {"h": 1.0, "w": 10.0},
    71: {"h": 1.7, "w": 78.5},
    72: {"h": 0.6, "w": 8.0},
    73: {"h": 1.8, "w": 146.0},
    74: {"h": 0.4, "w": 20.0},
    75: {"h": 1.0, "w": 106.0},
    76: {"h": 1.4, "w": 300.0},
    77: {"h": 1.7, "w": 380.0},
    78: {"h": 2.0, "w": 600.0},
    79: {"h": 1.1, "w": 360.0},
    80: {"h": 1.0, "w": 30.0},
    81: {"h": 0.3, "w": 1.0},
    82: {"h": 0.6, "w": 10.0},
    83: {"h": 0.8, "w": 15.0},
    84: {"h": 0.9, "w": 39.2},
    85: {"h": 1.8, "w": 60.0},
    86: {"h": 1.1, "w": 90.0},
    87: {"h": 1.6, "w": 88.8},
    88: {"h": 0.8, "w": 30.0},
    89: {"h": 1.3, "w": 30.0},
    90: {"h": 0.3, "w": 2.0},
    91: {"h": 0.5, "w": 4.0},
    92: {"h": 1.3, "w": 0.1},
    93: {"h": 1.6, "w": 0.1},
    94: {"h": 1.5, "w": 40.5},
    96: {"h": 1.0, "w": 12.0},
    97: {"h": 1.0, "w": 12.5},
    98: {"h": 0.6, "w": 6.5},
    99: {"h": 1.3, "w": 60.0},
    100: {"h": 0.5, "w": 1.5},
    101: {"h": 0.6, "w": 2.5},
    102: {"h": 0.6, "w": 5.0},
    103: {"h": 1.5, "w": 100.0},
    104: {"h": 0.4, "w": 6.5},
    105: {"h": 1.0, "w": 45.0},
    106: {"h": 1.4, "w": 50.0},
    107: {"h": 1.3, "w": 48.0},
    108: {"h": 1.0, "w": 145.0},
    109: {"h": 0.5, "w": 8.0},
    110: {"h": 1.6, "w": 135.0},
    111: {"h": 0.9, "w": 120.0},
    112: {"h": 1.6, "w": 120.0},
    113: {"h": 1.2, "w": 6.5},
    114: {"h": 1.0, "w": 15.0},
    115: {"h": 2.2, "w": 80.0},
    116: {"h": 0.9, "w": 8.0},
    117: {"h": 1.3, "w": 25.0},
    118: {"h": 0.9, "w": 7.7},
    119: {"h": 1.3, "w": 23.0},
    120: {"h": 0.8, "w": 34.5},
    121: {"h": 1.1, "w": 55.0},
    122: {"h": 1.4, "w": 40.6},
    123: {"h": 1.5, "w": 49.8},
    124: {"h": 1.3, "w": 40.6},
    125: {"h": 1.0, "w": 29.5},
    126: {"h": 1.3, "w": 35.5},
    127: {"h": 0.9, "w": 24.0},
    128: {"h": 1.2, "w": 62.0},
    129: {"h": 0.9, "w": 10.0},
    130: {"h": 6.5, "w": 235.0},
    131: {"h": 2.5, "w": 220.0},
    132: {"h": 0.3, "w": 4.0},
    133: {"h": 0.3, "w": 6.5},
    134: {"h": 1.0, "w": 29.0},
    135: {"h": 0.9, "w": 24.5},
    136: {"h": 0.9, "w": 25.0},
    137: {"h": 0.3, "w": 1.0},
    138: {"h": 0.7, "w": 11.5},
    139: {"h": 1.3, "w": 35.0},
    140: {"h": 0.7, "w": 6.5},
    141: {"h": 1.5, "w": 77.0},
    142: {"h": 2.4, "w": 59.0},
    143: {"h": 2.1, "w": 460.0},
    144: {"h": 2.0, "w": 55.4},
    145: {"h": 1.6, "w": 32.6},
    146: {"h": 2.0, "w": 60.0},
    147: {"h": 1.8, "w": 3.3},
    148: {"h": 4.0, "w": 16.5},
    149: {"h": 2.0, "w": 165.0},
    150: {"h": 2.0, "w": 100.0},
    151: {"h": 0.3, "w": 4.0},
}

def fix_pokemon_data():
    """Fix pokemon entries by parsing and modifying Python dict"""
    with open('pokemon_extra_data.py', 'r') as f:
        lines = f.readlines()
    
    fixed_count = 0
    new_lines = []
    
    for i, line in enumerate(lines):
        # Check if this line contains a Pokemon ID we need to fix
        modified = False
        
        for pokemon_id, data in FIXES.items():
            # Pattern: spaces + ID: {
            pattern = rf'(\s+){pokemon_id}:\s*{{\s*"height":\s*[\d.]+,\s*"weight":\s*[\d.]+,'
            if re.search(pattern, line):
                # This is a line we need to fix
                # Replace the height and weight values
                new_line = re.sub(
                    rf'({pokemon_id}:\s*{{\s*"height":\s*)[\d.]+(\s*,\s*"weight":\s*)[\d.]+',
                    rf'\g<1>{data["h"]}\g<2>{data["w"]}',
                    line
                )
                if new_line != line:
                    new_lines.append(new_line)
                    fixed_count += 1
                    print(f"✓ Fixed Pokemon ID {pokemon_id}: height={data['h']}m, weight={data['w']}kg")
                    modified = True
                    break
        
        if not modified:
            new_lines.append(line)
    
    # Write back the file
    with open('pokemon_extra_data.py', 'w') as f:
        f.writelines(new_lines)
    
    return fixed_count

def main():
    print("Starting comprehensive Pokemon size fixes...")
    print(f"Preparing to fix {len(FIXES)} Pokemon entries\n")
    
    fixed = fix_pokemon_data()
    
    print(f"\n✓ Successfully fixed {fixed} Pokemon entries")
    print("✓ All changes saved to pokemon_extra_data.py")

if __name__ == "__main__":
    main()
